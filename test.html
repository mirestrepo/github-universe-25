<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infrastructure WG - Kanban Board</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .task-card {
            transition: opacity 0.2s ease;
        }
        .task-card.dragging {
            opacity: 0.5;
            border: 2px dashed #4f46e5;
        }
        .board-lane {
            min-height: 200px;
        }
    </style>
</head>
<body class="bg-gray-100">

    <div class="container mx-auto p-4 md:p-8">
        <header class="mb-8">
            <h1 class="text-3xl font-bold text-gray-800">Infrastructure Working Group</h1>
            <p class="text-lg text-gray-600">Action Item Kanban Board</p>
        </header>

        <!-- Kanban Board -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6" id="kanban-board">

            <!-- To Do Column -->
            <div id="todo-lane" class="board-lane bg-gray-200 rounded-lg shadow-inner" ondragover="allowDrop(event)" ondrop="drop(event)">
                <h2 class="text-xl font-semibold text-gray-700 p-4 border-b border-gray-300">To Do</h2>
                <div id="todo-tasks" class="p-4 space-y-4">
                    <!-- Tasks will be injected here by JS -->
                </div>
            </div>

            <!-- In Progress Column -->
            <div id="inprogress-lane" class="board-lane bg-gray-200 rounded-lg shadow-inner" ondragover="allowDrop(event)" ondrop="drop(event)">
                <h2 class="text-xl font-semibold text-gray-700 p-4 border-b border-gray-300">In Progress</h2>
                <div id="inprogress-tasks" class="p-4 space-y-4">
                    <!-- Tasks will be injected here by JS -->
                </div>
            </div>

            <!-- Done Column -->
            <div id="done-lane" class="board-lane bg-gray-200 rounded-lg shadow-inner" ondragover="allowDrop(event)" ondrop="drop(event)">
                <h2 class="text-xl font-semibold text-gray-700 p-4 border-b border-gray-300">Done</h2>
                <div id="done-tasks" class="p-4 space-y-4">
                    <!-- Tasks will be injected here by JS -->
                </div>
            </div>

        </div>
    </div>

    <script>
        // --- DATA ---
        // Extracted from the 'Notes - Infrastructure Working Group' document
        const initialTasks = [
            { id: 'task-1', content: 'OpsGenie', assignee: 'Isa', status: 'todo' },
            { id: 'task-2', content: 'For your deployments, add a folder in Sumologic > CIS Public Dashboards > CCV and put queries for the logs from your applications', assignee: 'Everyone', status: 'todo' },
            { id: 'task-3', content: 'Walk through PRâ€™s in the BKE repo and merge what we can', assignee: 'Group/Unassigned', status: 'todo' },
            { id: 'task-4', content: 'Check what a better selector would be for nodes running Librechat', assignee: 'Group/Unassigned', status: 'todo' },
            { id: 'task-5', content: 'Create database alias for XNAT, LIBRECHAT, CONSTRUCTDB, XMAPORTAL', assignee: 'Group/Unassigned', status: 'todo' }
        ];

        // --- FUNCTIONS ---

        /**
         * Creates a DOM element for a task card.
         */
        function createTaskCard(task) {
            const card = document.createElement('div');
            card.id = task.id;
            card.className = 'task-card bg-white p-4 rounded-lg shadow cursor-move';
            card.draggable = true;
            card.ondragstart = drag;

            const assigneeTag = document.createElement('span');
            assigneeTag.className = `inline-block px-3 py-1 text-sm font-medium rounded-full mb-2 ${getAssigneeColor(task.assignee)}`;
            assigneeTag.textContent = task.assignee;

            const content = document.createElement('p');
            content.className = 'text-gray-800 font-medium';
            content.textContent = task.content;

            card.appendChild(assigneeTag);
            card.appendChild(content);
            return card;
        }

        /**
         * Returns Tailwind classes for assignee tags.
         */
        function getAssigneeColor(assignee) {
            switch (assignee) {
                case 'Isa':
                    return 'bg-blue-100 text-blue-800';
                case 'Everyone':
                    return 'bg-green-100 text-green-800';
                case 'Group/Unassigned':
                default:
                    return 'bg-gray-300 text-gray-800';
            }
        }

        /**
         * Renders the initial board from the task data.
         */
        function renderBoard() {
            const columns = {
                todo: document.getElementById('todo-tasks'),
                inprogress: document.getElementById('inprogress-tasks'),
                done: document.getElementById('done-tasks')
            };

            // Clear existing tasks
            Object.values(columns).forEach(col => col.innerHTML = '');

            // Render tasks
            initialTasks.forEach(task => {
                const card = createTaskCard(task);
                const column = columns[task.status];
                if (column) {
                    column.appendChild(card);
                }
            });
        }

        // --- DRAG & DROP EVENT HANDLERS ---

        /**
         * Stores the ID of the task being dragged.
         */
        function drag(event) {
            event.dataTransfer.setData('text/plain', event.target.id);
            event.target.classList.add('dragging');
        }

        /**
         * Prevents the default behavior to allow dropping.
         */
        function allowDrop(event) {
            event.preventDefault();
        }

        /**
         * Handles the dropping of a task into a new lane.
         */
        function drop(event) {
            event.preventDefault();
            const taskId = event.dataTransfer.getData('text/plain');
            const taskCard = document.getElementById(taskId);
            
            // Find the closest parent lane and then its task container
            const lane = event.target.closest('.board-lane');
            if (lane) {
                const taskList = lane.querySelector('.p-4'); // Target the tasks container div
                if (taskList) {
                    taskList.appendChild(taskCard);
                }
            }
            
            // Clean up dragging class
            taskCard.classList.remove('dragging');
        }

        // --- INITIALIZATION ---
        window.onload = renderBoard;
    </script>
</body>
</html>
